# # -*- ruby -*-

module CrossFFI
  extend FFI::Library
  class Prim1Ordinary < FFI::Struct
    @@@
    struct do |s|
      s.name "struct prim1"
      s.include "#{File.dirname(@ffi_name)}/../../clib/primitives_support.h"
      s.field :i, :int
      s.field :f, :float
      s.field :d, :double
      s.field :c, :string
      s.field :next, :pointer
    end
    @@@
  end
end


module CrossFFI
  extend FFI::Library
  class Prim1CrossFFI < FFI::ManagedStruct
    @@@
    struct do |s|
      s.name "struct prim1"
      s.include "#{File.dirname(@ffi_name)}/../../clib/primitives_support.h"
      s.field :i, :int
      s.field :f, :float
      s.field :d, :double
      s.field :c, :string
      s.field :next, :pointer
    end
    @@@

    def self.release ptr
      CrossFFI::Primitives.free(ptr)
    end
  end
end
